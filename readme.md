# Fullstack SaaS AI Starter Kit ‚Äî –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **–í–µ—Ä—Å–∏—è**: 1.0 | **–î–∞—Ç–∞**: –§–µ–≤—Ä–∞–ª—å 2026 | **–ê–≤—Ç–æ—Ä**: Senior Full-Stack Engineer
>
> –î–æ–∫—É–º–µ–Ω—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —ç—Ç–æ—Ç —Å—Ç–∞—Ä—Ç–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **AI-powered SaaS –ø—Ä–æ–¥—É–∫—Ç–æ–≤**.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#1-–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
   - [üëâ –ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Starter Kit Implementation)](./docs/starter-kit-implementation.md)
2. [–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞](#2-–º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∏-–ª–æ–≥–∏–∫–∞)
3. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ ‚Äî –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#3-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫--–ø–æ—á–µ–º—É-–∏–º–µ–Ω–Ω–æ-—ç—Ç–∏-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
4. [–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Data Flow)](#4-–ø–æ—Ç–æ–∫-–¥–∞–Ω–Ω—ã—Ö-data-flow)
5. [–°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](#5-—Å–∏—Å—Ç–µ–º–∞-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
6. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏](#6-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö-–∏-—Ä–∞–±–æ—Ç–∞-—Å-–¥–∞–Ω–Ω—ã–º–∏)
7. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞](#7-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–ª–æ–∫–∞–ª—å–Ω–∞—è-—Å—Ä–µ–¥–∞)
8. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ tRPC + NestJS](#8-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-trpc--nestjs)
9. [–ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ](#9-—á—Ç–æ-—É–∂–µ-—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
10. [–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è SaaS](#10-—á—Ç–æ-–Ω—É–∂–Ω–æ-–¥–æ–±–∞–≤–∏—Ç—å-–¥–ª—è-saas)
11. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ò–ò: –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](#11-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–∏–∏-–¥–æ—Ä–æ–∂–Ω–∞—è-–∫–∞—Ä—Ç–∞)
12. [–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#12-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
13. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#13-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
14. [–ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞](#14-–∫–æ–Ω–≤–µ–Ω—Ü–∏–∏-–∏-–∫–∞—á–µ—Å—Ç–≤–æ-–∫–æ–¥–∞)
15. [–î–µ–ø–ª–æ–π](#15-–¥–µ–ø–ª–æ–π)

---

## 1. –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          CLIENT LAYER                               ‚îÇ
‚îÇ   Next.js 16 (App Router) ¬∑ React 19 ¬∑ TanStack Query ¬∑ tRPC       ‚îÇ
‚îÇ   Port: 3000                                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ tRPC over HTTP (httpBatchLink)
                             ‚îÇ + httpOnly Cookie (JWT)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          API LAYER                                  ‚îÇ
‚îÇ   NestJS 11 ¬∑ Express 5 ¬∑ tRPC Server ¬∑ Passport-JWT               ‚îÇ
‚îÇ   Port: 4000                                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ Prisma ORM (pg adapter)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        DATABASE LAYER                               ‚îÇ
‚îÇ   PostgreSQL 16 ¬∑ Prisma 7 ¬∑ Connection Pool via pg                 ‚îÇ
‚îÇ   Port: 5432                                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

SHARED PACKAGES:
  @core/shared    ‚Äî Zod —Å—Ö–µ–º—ã, TypeScript —Ç–∏–ø—ã, —É—Ç–∏–ª–∏—Ç—ã, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
  @core/trpc      ‚Äî tRPC —Ä–æ—É—Ç–µ—Ä (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ API)
  @core/database  ‚Äî Prisma –∫–ª–∏–µ–Ω—Ç, —Å–µ—Ä–≤–∏—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

**–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ              | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ                                                        |
| -------------------- | ------------------------------------------------------------------ |
| –ú–æ–Ω–æ—Ä–µ–ø–æ (Turborepo) | –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∏–ø–æ–≤, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞, –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã   |
| tRPC –ø–æ–≤–µ—Ä—Ö REST     | E2E type safety –±–µ–∑ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, RPC-—Å–µ–º–∞–Ω—Ç–∏–∫–∞ –¥–ª—è SaaS –æ–ø–µ—Ä–∞—Ü–∏–π |
| NestJS –∫–∞–∫ —Ö–æ—Å—Ç      | Dependency Injection –¥–ª—è AI-—Å–µ—Ä–≤–∏—Å–æ–≤, –º–æ–¥—É–ª—å–Ω–∞—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å      |
| Zod —Å—Ö–µ–º—ã –≤ shared   | –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ          |
| httpOnly JWT cookies | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—Ç XSS-–∞—Ç–∞–∫, –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å tRPC                 |

---

## 2. –ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞

```
starter-kit/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ api/          ‚Üê NestJS API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ö–æ—Å—Ç tRPC middleware)
‚îÇ   ‚îî‚îÄ‚îÄ web/          ‚Üê Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ trpc/         ‚Üê –†–æ—É—Ç–µ—Ä—ã, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê)
‚îÇ   ‚îú‚îÄ‚îÄ database/     ‚Üê Prisma —Å—Ö–µ–º–∞, –∫–ª–∏–µ–Ω—Ç, —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ shared/       ‚Üê Zod —Å—Ö–µ–º—ã, —Ç–∏–ø—ã, —É—Ç–∏–ª–∏—Ç—ã, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ config-eslint/‚Üê –ï–¥–∏–Ω—ã–π ESLint –∫–æ–Ω—Ñ–∏–≥
‚îÇ   ‚îî‚îÄ‚îÄ config-tailwind/‚Üê –ï–¥–∏–Ω—ã–π Tailwind —Ç–µ–º–∞
‚îÇ
‚îú‚îÄ‚îÄ brainstorming/    ‚Üê –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∏–¥–µ–∏ (MCP, Vector Store, etc.)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ turbo.json        ‚Üê –ì—Ä–∞—Ñ –∑–∞–¥–∞—á –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ pnpm-workspace.yaml
```

### –ü–æ—á–µ–º—É —Ç–∞–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ?

**`@core/trpc`** —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–æ—É—Ç–µ—Ä—ã –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É ‚Äî —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ. –†–æ—É—Ç–µ—Ä—ã **–Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç** NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –ø–æ—Ç–æ–º—É —á—Ç–æ:

- –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å tRPC –Ω–∞ edge runtime (Cloudflare Workers)
- –¢–µ—Å—Ç—ã –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥–Ω—è—Ç–∏—è –≤—Å–µ–≥–æ NestJS
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–æ—É—Ç–µ—Ä—ã –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –º–æ–Ω–æ—Ä–µ–ø–æ

**`@core/shared`** –∏–º–µ–µ—Ç —è–≤–Ω—ã–µ exports:

```json
"exports": {
  ".":        "./src/index.ts",
  "./types":  "./src/types/index.ts",
  "./schemas":"./src/schemas/index.ts",
  "./utils":  "./src/utils/index.ts",
  "./constants":"./src/constants/index.ts"
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å —Ç–æ—á–µ—á–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è tree-shaking, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –∫–æ–≥–¥–∞ shared –≤—ã—Ä–∞—Å—Ç–µ—Ç –¥–æ –¥–µ—Å—è—Ç–∫–æ–≤ —Ñ–∞–π–ª–æ–≤.

### Turborepo –≥—Ä–∞—Ñ –∑–∞–¥–∞—á

```
db:generate ‚îÄ‚îÄ‚ñ∫ build ‚îÄ‚îÄ‚ñ∫ (deploy)
     ‚îÇ
     ‚îî‚îÄ‚îÄ‚ñ∫ dev (persistent)

lint ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ (CI gate)
type-check ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ (CI gate)
```

Turbo –∫–µ—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–¥–∞—á. –ï—Å–ª–∏ `schema.prisma` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Äî `db:generate` –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∫–µ—à–∞. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç CI –Ω–∞ 60-80%.

---

## 3. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ ‚Äî –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### Frontend

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç     | –í–µ—Ä—Å–∏—è  | –†–æ–ª—å                                                    |
| -------------- | ------- | ------------------------------------------------------- |
| Next.js        | 16.1.1  | App Router, SSR/RSC, file-based routing                 |
| React          | 19.2.3  | UI, Concurrent Mode, Server Components                  |
| Tailwind CSS   | 4.1.18  | Utility-first CSS —Å CSS variables (v4 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)        |
| TanStack Query | 5.90.16 | –°–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| tRPC Client    | 11.0.0  | Type-safe RPC –≤—ã–∑–æ–≤—ã                                    |

> **–í–∞–∂–Ω–æ –¥–ª—è AI SaaS**: TanStack Query –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è polling —Å—Ç–∞—Ç—É—Å–∞ AI –∑–∞–¥–∞—á, streaming —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

### Backend

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç   | –í–µ—Ä—Å–∏—è  | –†–æ–ª—å                                  |
| ------------ | ------- | ------------------------------------- |
| NestJS       | 11.1.11 | DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –º–æ–¥—É–ª–∏, lifecycle hooks |
| tRPC Server  | 11.8.1  | Type-safe API –ø—Ä–æ—Ü–µ–¥—É—Ä—ã               |
| Express      | 5.2.1   | HTTP –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è tRPC middleware      |
| Passport-JWT | 4.0.1   | JWT —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏          |
| Zod          | 3.24.1  | Runtime –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö      |

> **–í–∞–∂–Ω–æ –¥–ª—è AI SaaS**: NestJS —Å DI –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å AI-—Å–µ—Ä–≤–∏—Å—ã (OpenAI, Anthropic, –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –±–∞–∑—ã) –≤ –ª—é–±–æ–π —Ä–æ—É—Ç–µ—Ä —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `@Injectable()` –ø–∞—Ç—Ç–µ—Ä–Ω.

### Database

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç         | –í–µ—Ä—Å–∏—è | –†–æ–ª—å                           |
| ------------------ | ------ | ------------------------------ |
| Prisma             | 7.2.0  | ORM, –º–∏–≥—Ä–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ |
| PostgreSQL         | 16     | –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ             |
| pg (node-postgres) | 8.16.3 | –ù–∞—Ç–∏–≤–Ω—ã–π PG –¥—Ä–∞–π–≤–µ—Ä            |
| @prisma/adapter-pg | 7.2.0  | Prisma –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è pg          |

> **–í–∞–∂–Ω–æ –¥–ª—è AI SaaS**: PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `pgvector` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è embeddings. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è RAG (Retrieval-Augmented Generation) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

---

## 4. –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Data Flow)

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å (read)

```
[Browser] ‚Üí useQuery(trpc.users.getUsers)
    ‚Üí tRPC httpBatchLink ‚Üí POST /trpc/users.getUsers
    ‚Üí [NestJS] Express middleware ‚Üí createTRPCContext()
        ‚Üí JWT –∏–∑ cookie ‚Üí verify ‚Üí prisma.user.findUnique()
        ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç: { user: {...} }
    ‚Üí [tRPC] usersRouter.getUsers.query()
        ‚Üí prisma.user.findMany()
    ‚Üí JSON –æ—Ç–≤–µ—Ç ‚Üí TanStack Query cache
    ‚Üí React —Ä–µ-—Ä–µ–Ω–¥–µ—Ä
```

### –ú—É—Ç–∞—Ü–∏—è (write)

```
[Browser] ‚Üí useMutation(trpc.auth.login)
    ‚Üí { email: "user@example.com" }
    ‚Üí LoginInputSchema.parse() (Zod –∫–ª–∏–µ–Ω—Ç)
    ‚Üí POST /trpc/auth.login
    ‚Üí [NestJS] createTRPCContext() (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, publicProcedure)
    ‚Üí [tRPC] authRouter.login.mutation()
        ‚Üí LoginInputSchema.parse() (Zod —Å–µ—Ä–≤–µ—Ä, –¥–≤–æ–π–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
        ‚Üí prisma.user.upsert()
        ‚Üí jwt.sign({ userId, email })
        ‚Üí res.cookie("token", jwt, httpOnlyOptions)
    ‚Üí { success: true, user: {...} }
    ‚Üí queryClient.setQueryData() (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞)
    ‚Üí Header –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç email
```

---

## 5. –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```
apps/api/src/
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ auth.module.ts        ‚Üê –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç JwtModule, JwtStrategy
‚îÇ   ‚îî‚îÄ‚îÄ jwt.strategy.ts       ‚Üê Passport —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (validate payload)
‚îî‚îÄ‚îÄ trpc/
    ‚îî‚îÄ‚îÄ trpc.service.ts       ‚Üê –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç tRPC middleware –Ω–∞ /trpc

packages/trpc/src/
‚îú‚îÄ‚îÄ context.ts                ‚Üê createTRPCContext: –∏–∑–≤–ª–µ–∫–∞–µ—Ç + –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç JWT
‚îú‚îÄ‚îÄ trpc.ts                   ‚Üê publicProcedure + protectedProcedure
‚îî‚îÄ‚îÄ router/
    ‚îî‚îÄ‚îÄ auth.router.ts        ‚Üê login, me, logout –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
```

### –°—Ö–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```
Cookie: httpOnly=true, secure=(production), sameSite="lax", maxAge=24h
JWT: expires=7d, payload={ userId, email }
```

> **–í–Ω–∏–º–∞–Ω–∏–µ**: maxAge cookie (24h) –∏ JWT expiry (7d) **–Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç**. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –µ–¥–∏–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å refresh token –ª–æ–≥–∏–∫—É.

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è production SaaS

```typescript
// 1. Refresh tokens (–¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π)
model RefreshToken {
  id        String   @id @default(cuid())
  token     String   @unique
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  expiresAt DateTime
  createdAt DateTime @default(now())
}

// 2. OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Google, GitHub)
// ‚Üí —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Better-Auth –∏–ª–∏ Auth.js v5

// 3. Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (VerificationToken —É–∂–µ –≤ —Å—Ö–µ–º–µ!)
// ‚Üí —Ç–∞–±–ª–∏—Ü–∞ VerificationToken –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

// 4. Rate limiting –Ω–∞ auth —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
// ‚Üí @nestjs/throttler + Redis

// 5. Audit log (–∫—Ç–æ, –∫–æ–≥–¥–∞, –æ—Ç–∫—É–¥–∞ –∑–∞—à—ë–ª)
```

---

## 6. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### –¢–µ–∫—É—â–∞—è —Å—Ö–µ–º–∞

```prisma
model User {
  id        String   @id @default(cuid())  // cuid2 –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ UUID
  email     String   @unique
  name      String?
  role      ROLE?    @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime
  @@unique([identifier, token])
}

enum ROLE {
  ADMIN
  USER
}
```

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è SaaS

```prisma
// –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ / –¢–µ–Ω–∞–Ω—Ç—ã (multi-tenancy)
model Organization {
  id        String   @id @default(cuid())
  name      String
  slug      String   @unique
  plan      PLAN     @default(FREE)
  members   OrganizationMember[]
  createdAt DateTime @default(now())
}

model OrganizationMember {
  id             String       @id @default(cuid())
  userId         String
  organizationId String
  role           ORG_ROLE     @default(MEMBER)
  user           User         @relation(fields: [userId], references: [id])
  organization   Organization @relation(fields: [organizationId], references: [id])
  @@unique([userId, organizationId])
}

// –ü–æ–¥–ø–∏—Å–∫–∏ / –ë–∏–ª–ª–∏–Ω–≥
model Subscription {
  id                   String   @id @default(cuid())
  organizationId       String   @unique
  stripeCustomerId     String?  @unique
  stripeSubscriptionId String?  @unique
  plan                 PLAN     @default(FREE)
  status               SUB_STATUS
  currentPeriodEnd     DateTime?
  organization         Organization @relation(fields: [organizationId], references: [id])
}

// AI Usage tracking (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è cost management)
model AIUsageRecord {
  id             String   @id @default(cuid())
  organizationId String
  userId         String
  model          String   // "gpt-4o", "claude-3-5-sonnet"
  inputTokens    Int
  outputTokens   Int
  cost           Float    // –≤ USD
  feature        String   // "chat", "document-analysis", etc.
  createdAt      DateTime @default(now())
}

enum PLAN { FREE STARTER PRO ENTERPRISE }
enum ORG_ROLE { OWNER ADMIN MEMBER }
enum SUB_STATUS { ACTIVE PAST_DUE CANCELED TRIALING }
```

### –†–∞–±–æ—Ç–∞ —Å DatabaseService

```typescript
// packages/database/src/database.service.ts
// –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π singleton Prisma –∫–ª–∏–µ–Ω—Ç
// –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –∏–∑–±–µ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö connection pools

// –î–ª—è AI SaaS –¥–æ–±–∞–≤—å—Ç–µ:
// 1. Read replica –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
// 2. Connection pooling —á–µ—Ä–µ–∑ PgBouncer –∏–ª–∏ Prisma Accelerate
// 3. Soft deletes (deletedAt DateTime?) –≤–º–µ—Å—Ç–æ hard delete
```

---

## 7. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
git clone <repo>
cd starter-kit
pnpm install

# 2. –ü–æ–¥–Ω—è—Ç—å PostgreSQL
docker-compose up -d

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env:
# DATABASE_URL="postgresql://user:password@localhost:5432/mydb?schema=public"
# JWT_SECRET="your-super-secret-key-min-32-chars"
# NODE_ENV="development"

# 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
pnpm db:push        # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
pnpm db:generate    # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma –∫–ª–∏–µ–Ω—Ç

# 5. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (seed)
# –°–æ–∑–¥–∞—ë—Ç admin@starter.kit / Admin User
cd packages/database && npx prisma db seed

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë –≤ dev —Ä–µ–∂–∏–º–µ
pnpm dev
# API:  http://localhost:4000
# Web:  http://localhost:3000
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –±—Ä–∞—É–∑–µ—Ä–µ
pnpm db:studio

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –≤—Å–µ–≥–æ –º–æ–Ω–æ—Ä–µ–ø–æ
pnpm type-check

# –õ–∏–Ω—Ç–∏–Ω–≥
pnpm lint

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm format

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç –≤ –º–æ–Ω–æ—Ä–µ–ø–æ
mkdir -p packages/ai-service/src
# –î–æ–±–∞–≤–∏—Ç—å package.json –ø–æ –æ–±—Ä–∞–∑—Ü—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
```

---

## 8. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ tRPC + NestJS

### –ö–∞–∫ tRPC –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ NestJS

```
NestJS Bootstrap (main.ts)
    ‚Üì
AppModule
    ‚îú‚îÄ‚îÄ DatabaseModule (global)   ‚Üí DatabaseService
    ‚îî‚îÄ‚îÄ AuthModule                ‚Üí JwtModule, JwtStrategy

TrpcService.applyMiddleware(app):
    app.use("/trpc", trpcExpress.createExpressMiddleware({
        router: appRouter,
        createContext: createTRPCContext,
    }))

AppController:
    @Get("users") ‚Üí REST endpoint (–¥—É–±–ª–∏—Ä—É–µ—Ç getUsers)
    ‚Üí –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–±—Ä–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ tRPC
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å packages/trpc/src/router/ai.router.ts
import { z } from "zod"
import { router, protectedProcedure } from "../trpc.js"

export const aiRouter = router({
  generateText: protectedProcedure
    .input(z.object({ prompt: z.string().min(1).max(4000) }))
    .mutation(async ({ input, ctx }) => {
      // ctx.user –¥–æ—Å—Ç—É–ø–µ–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è protectedProcedure
      // –í—ã–∑–æ–≤ AI API
      const result = await openai.chat.completions.create({...})
      return { text: result.choices[0].message.content }
    }),

  streamText: protectedProcedure
    .input(z.object({ prompt: z.string() }))
    .subscription(async function* ({ input, ctx }) {
      // tRPC subscriptions –¥–ª—è streaming
      for await (const chunk of openaiStream) {
        yield { chunk: chunk.choices[0].delta.content }
      }
    }),
})

// 2. –î–æ–±–∞–≤–∏—Ç—å –≤ packages/trpc/src/router/index.ts
export const appRouter = router({
  auth: authRouter,
  users: userRouter,
  ai: aiRouter,   // ‚Üê –¥–æ–±–∞–≤–∏—Ç—å
})

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ ‚Äî —Ç–∏–ø—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
const { mutate } = trpc.ai.generateText.useMutation()
```

### –ö–æ–Ω—Ç–µ–∫—Å—Ç tRPC (createTRPCContext)

```typescript
// packages/trpc/src/context.ts
// –¢–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
// { req, res, prisma, user? }
//
// –î–ª—è AI SaaS —Ä–∞—Å—à–∏—Ä—å—Ç–µ:
export type TRPCContext = {
  req: Request;
  res: Response;
  prisma: PrismaClient;
  user?: User; // —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  organization?: Organization; // —Ç–µ–∫—É—â–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
  subscription?: Subscription; // –ø–ª–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏
  aiUsageTracker: AIUsageTracker; // —Ç—Ä–µ–∫–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤
};
```

---

## 9. –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å     | –°—Ç–∞—Ç—É—Å      | –§–∞–π–ª—ã                                      |
| -------------------- | ----------- | ------------------------------------------ |
| –ú–æ–Ω–æ—Ä–µ–ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞   | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `turbo.json`, `pnpm-workspace.yaml`        |
| PostgreSQL + Prisma  | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/database/`                       |
| NestJS API —Å–µ—Ä–≤–µ—Ä    | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `apps/api/`                                |
| Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥     | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `apps/web/`                                |
| tRPC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ      | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/trpc/`                           |
| JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è   | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `apps/api/src/auth/`                       |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AI Agents | ‚úÖ –§–ê–ó–ê 2   | `packages/ai-agents/`                      |
| httpOnly cookies     | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/trpc/src/router/auth.router.ts`  |
| Shared Zod —Å—Ö–µ–º—ã     | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/shared/`                         |
| ESLint + Prettier    | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/config-eslint/`                  |
| Tailwind CSS v4      | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/config-tailwind/`                |
| Git hooks (Husky)    | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `.husky/pre-commit`                        |
| Commit lint          | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `commitlint.config.cjs`                    |
| Docker (PostgreSQL)  | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `docker-compose.yml`                       |
| Seed –¥–∞–Ω–Ω—ã–µ          | ‚úÖ –ì–æ—Ç–æ–≤–æ   | `packages/database/prisma/seed.ts`         |
| User CRUD            | ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ | `packages/trpc/src/router/users.router.ts` |
| –†–æ–ª–∏ (ADMIN/USER)    | ‚úÖ –í —Å—Ö–µ–º–µ  | `packages/database/prisma/schema.prisma`   |

---

## 10. –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è SaaS

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ (MVP)

```
‚ñ° –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–∞—Ä–æ–ª–µ–º (bcrypt) –∏–ª–∏ OAuth
‚ñ° Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (VerificationToken —É–∂–µ –≤ —Å—Ö–µ–º–µ)
‚ñ° Organizations / Teams (multi-tenancy)
‚ñ° Billing (Stripe) ‚Äî subscriptions, webhooks
‚ñ° Usage limits per plan
‚ñ° Error tracking (Sentry)
‚ñ° Structured logging (Pino / Winston)
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–∞–∂–Ω–æ –¥–ª—è —Ä–æ—Å—Ç–∞

```
‚ñ° Redis (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, rate limiting, sessions, job queue)
‚ñ° Background jobs (BullMQ + Redis)
‚ñ° File uploads (S3 / R2)
‚ñ° Email –æ—Ç–ø—Ä–∞–≤–∫–∞ (Resend / Postmark)
‚ñ° Analytics (Posthog / Mixpanel)
‚ñ° Feature flags (OpenFeature + Flipt)
‚ñ° Admin –ø–∞–Ω–µ–ª—å
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: AI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞

```
‚ñ° OpenAI / Anthropic –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚ñ° Streaming responses (tRPC subscriptions –∏–ª–∏ SSE)
‚ñ° Token usage tracking –∏ –±–∏–ª–ª–∏–Ω–≥ per-usage
‚ñ° Vector database (pgvector –∏–ª–∏ Pinecone)
‚ñ° RAG pipeline (LangChain.js / LlamaIndex.ts / Vercel AI SDK)
‚ñ° Prompt management –∏ versioning
‚ñ° AI response –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (semantic cache)
‚ñ° Content moderation –¥–ª—è user inputs
```

---

## 11. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ò–ò: –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ AI –º–æ–¥—É–ª—è –¥–ª—è NestJS

```typescript
// apps/api/src/ai/
‚îú‚îÄ‚îÄ ai.module.ts
‚îú‚îÄ‚îÄ ai.service.ts          ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π AI —Å–µ—Ä–≤–∏—Å (OpenAI, Anthropic)
‚îú‚îÄ‚îÄ embedding.service.ts   ‚Üê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ rag.service.ts         ‚Üê Retrieval-Augmented Generation
‚îú‚îÄ‚îÄ usage.service.ts       ‚Üê –¢—Ä–µ–∫–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤ / —Å—Ç–æ–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ moderation.service.ts  ‚Üê –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

// –ü—Ä–∏–º–µ—Ä ai.service.ts
@Injectable()
export class AIService {
  private openai: OpenAI
  private anthropic: Anthropic

  constructor(
    private prisma: DatabaseService,
    private usage: UsageService,
  ) {
    this.openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })
    this.anthropic = new Anthropic({ apiKey: process.env.ANTHROPIC_API_KEY })
  }

  async generateCompletion(
    userId: string,
    orgId: string,
    prompt: string,
    model: "gpt-4o" | "claude-3-5-sonnet-20241022" = "claude-3-5-sonnet-20241022"
  ) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏
    await this.usage.checkLimits(orgId)

    // 2. –í—ã–∑–æ–≤ AI
    const response = await this.anthropic.messages.create({
      model,
      max_tokens: 1024,
      messages: [{ role: "user", content: prompt }],
    })

    // 3. –ó–∞–ø–∏—Å–∞—Ç—å usage
    await this.usage.record({
      userId,
      orgId,
      model,
      inputTokens: response.usage.input_tokens,
      outputTokens: response.usage.output_tokens,
    })

    return response.content[0].text
  }
}
```

### Vercel AI SDK (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è streaming)

```typescript
// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Vercel AI SDK –¥–∞—ë—Ç —É–¥–æ–±–Ω—ã–π streaming –∏–∑ box
// npm install ai @ai-sdk/anthropic

import { streamText } from "ai";
import { anthropic } from "@ai-sdk/anthropic";

// packages/trpc/src/router/ai.router.ts
generateStream: protectedProcedure
  .input(z.object({ prompt: z.string() }))
  .mutation(async ({ input, ctx }) => {
    const result = streamText({
      model: anthropic("claude-3-5-sonnet-20241022"),
      prompt: input.prompt,
    });

    // –ü–µ—Ä–µ–¥–∞—Ç—å stream –≤ response
    return result.toDataStreamResponse();
  });
```

### pgvector –¥–ª—è RAG

```sql
-- –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostgreSQL
CREATE EXTENSION IF NOT EXISTS vector;
```

```prisma
// –í schema.prisma –¥–æ–±–∞–≤–∏—Ç—å
model Document {
  id             String   @id @default(cuid())
  organizationId String
  content        String
  embedding      Unsupported("vector(1536)")?  // OpenAI ada-002 dimensions
  metadata       Json?
  createdAt      DateTime @default(now())

  @@index([organizationId])
}
```

```typescript
// Semantic search
async searchSimilar(embedding: number[], orgId: string, limit = 5) {
  const results = await this.prisma.$queryRaw<Document[]>`
    SELECT id, content, metadata,
           1 - (embedding <=> ${embedding}::vector) AS similarity
    FROM "Document"
    WHERE "organizationId" = ${orgId}
    ORDER BY embedding <=> ${embedding}::vector
    LIMIT ${limit}
  `
  return results
}
```

### AI Usage Billing Pattern

```typescript
// –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤, —Ñ–µ–≤—Ä–∞–ª—å 2026)
const MODEL_PRICING: Record<string, { input: number; output: number }> = {
  "claude-3-5-sonnet-20241022": { input: 3.0,  output: 15.0 },
  "claude-3-haiku-20241022":    { input: 0.25, output: 1.25 },
  "gpt-4o":                     { input: 2.5,  output: 10.0 },
  "gpt-4o-mini":                { input: 0.15, output: 0.60 },
}

async recordAndCharge(params: {
  orgId: string
  model: string
  inputTokens: number
  outputTokens: number
}) {
  const pricing = MODEL_PRICING[params.model]
  const cost =
    (params.inputTokens  / 1_000_000) * pricing.input +
    (params.outputTokens / 1_000_000) * pricing.output

  await this.prisma.aIUsageRecord.create({
    data: { ...params, cost, feature: "chat" },
  })

  // –û–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  await this.prisma.organization.update({
    where: { id: params.orgId },
    data: { monthlySpend: { increment: cost } },
  })
}
```

---

## 12. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞               | –†–µ—à–µ–Ω–∏–µ                            |
| ---------------------- | ---------------------------------- |
| –û–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å API       | Horizontal scaling + load balancer |
| –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è        | Redis (ioredis) + –∫–µ—à tRPC –æ—Ç–≤–µ—Ç–æ–≤ |
| –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ AI –≤—ã–∑–æ–≤—ã   | BullMQ job queue –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –∑–∞–¥–∞—á |
| –ù–µ—Ç connection pooling | PgBouncer –∏–ª–∏ Prisma Accelerate    |
| –ù–µ—Ç CDN                | Cloudflare / Vercel Edge           |

### Redis –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```typescript
// apps/api/src/cache/cache.module.ts
@Module({
  imports: [
    BullModule.forRoot({ connection: { host: "localhost", port: 6379 } }),
    BullModule.registerQueue({ name: "ai-tasks" }),
  ],
  providers: [CacheService, AIQueueProcessor],
})
export class CacheModule {}

// Processor –¥–ª—è –¥–æ–ª–≥–∏—Ö AI –∑–∞–¥–∞—á
@Processor("ai-tasks")
export class AIQueueProcessor {
  @Process("generate-report")
  async handleReport(job: Job<{ orgId: string; prompt: string }>) {
    const result = await this.aiService.generateCompletion(...)
    // –£–≤–µ–¥–æ–º–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ WebSocket –∏–ª–∏ polling
  }
}
```

### Turborepo Remote Caching (–¥–ª—è CI/CD)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å Vercel Remote Cache
npx turbo login
npx turbo link

# –í CI/CD –¥–æ–±–∞–≤–∏—Ç—å:
# TURBO_TOKEN –∏ TURBO_TEAM
# –≠—Ç–æ —É—Å–∫–æ—Ä–∏—Ç CI –Ω–∞ 50-90%
```

---

## 13. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ú–µ—Ö–∞–Ω–∏–∑–º             | –°—Ç–∞—Ç—É—Å                          |
| -------------------- | ------------------------------- |
| httpOnly cookies     | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ                  |
| JWT –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è      | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ                  |
| sameSite cookie      | ‚úÖ "lax"                        |
| Zod input validation | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ                  |
| CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞       | ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ main.ts          |
| Rate limiting        | ‚ùå –ù–µ—Ç                          |
| Helmet.js            | ‚ùå –ù–µ—Ç                          |
| SQL injection        | ‚úÖ Prisma –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã |

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ä—ã –¥–ª—è production

```typescript
// apps/api/src/main.ts ‚Äî –¥–æ–±–∞–≤–∏—Ç—å:

import helmet from "@fastify/helmet" // –∏–ª–∏ helmet –¥–ª—è express
import { ThrottlerModule } from "@nestjs/throttler"

// 1. Security headers
app.use(helmet())

// 2. CORS (–æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å origins)
app.enableCors({
  origin: process.env.ALLOWED_ORIGINS?.split(",") ?? "http://localhost:3000",
  credentials: true,
})

// 3. Rate limiting
@Module({
  imports: [
    ThrottlerModule.forRoot([{
      ttl: 60000,
      limit: 100, // 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
    }]),
  ],
})

// 4. –î–ª—è AI —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ ‚Äî –±–æ–ª–µ–µ –∂—ë—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã
@Throttle({ default: { ttl: 60000, limit: 10 } })
generateText: protectedProcedure...

// 5. Input sanitization –¥–ª—è AI –ø—Ä–æ–º–ø—Ç–æ–≤
import DOMPurify from "isomorphic-dompurify"
const sanitizedPrompt = DOMPurify.sanitize(input.prompt)
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è production

```bash
# .env.production
DATABASE_URL=               # Connection pooler URL (PgBouncer)
DIRECT_URL=                 # Direct DB URL (–¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π)
JWT_SECRET=                 # Min 64 chars, —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã
JWT_REFRESH_SECRET=         # –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –¥–ª—è refresh
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
REDIS_URL=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
RESEND_API_KEY=
SENTRY_DSN=
ALLOWED_ORIGINS=https://yourdomain.com
NODE_ENV=production
```

---

## 14. –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

### Commit Message Format

```
<type>(<scope>): <description>

Types:   feat | fix | docs | style | refactor | perf | test | build | ci | chore | revert
Scopes:  root | api | web | shared | db | deps | config

–ü—Ä–∏–º–µ—Ä—ã:
feat(ai): add streaming text generation endpoint
fix(auth): correct JWT expiry mismatch between cookie and token
chore(db): add pgvector extension support
feat(billing): integrate Stripe subscription webhooks
```

### Naming Conventions

```typescript
// –§–∞–π–ª—ã ‚Äî kebab-case
auth.router.ts
database.service.ts
use-auth.ts

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/—Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî camelCase
const userRouter = router({...})
const createTRPCContext = async () => {...}

// –¢–∏–ø—ã/–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ‚Äî PascalCase
type User = z.infer<typeof UserSchema>
interface TRPCContext {...}

// Zod —Å—Ö–µ–º—ã ‚Äî PascalCase + Schema —Å—É—Ñ—Ñ–∏–∫—Å
const LoginInputSchema = z.object({...})
const UserSchema = z.object({...})

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã ‚Äî SCREAMING_SNAKE_CASE
const JWT_SECRET = process.env.JWT_SECRET
const MAX_TOKENS = 4096
```

### ESLint –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

```javascript
// packages/config-eslint/src/base.js
"no-console": ["warn", { allow: ["warn", "error"] }]  // ‚Üê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ logger
"@typescript-eslint/no-explicit-any": "warn"           // ‚Üê –∏–∑–±–µ–≥–∞–π—Ç–µ any
"prefer-const": "error"                                 // ‚Üê –≤—Å–µ–≥–¥–∞ const
"@typescript-eslint/no-unused-vars": ["warn", {
  "argsIgnorePattern": "^_"                            // ‚Üê –ø—Ä–µ—Ñ–∏–∫—Å _ –¥–ª—è unused
}]
```

---

## 15. –î–µ–ø–ª–æ–π

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è SaaS

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PRODUCTION                        ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  Vercel (Web)          Railway / Fly.io (API)        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Next.js App       ‚îî‚îÄ‚îÄ NestJS Docker             ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Edge Config       ‚îî‚îÄ‚îÄ Auto-scaling          ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  Neon / Supabase (DB)  Upstash (Redis)               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ PostgreSQL        ‚îî‚îÄ‚îÄ Serverless Redis          ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ pgvector          ‚îî‚îÄ‚îÄ Rate limiting         ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Branching         ‚îî‚îÄ‚îÄ Job queues            ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  Cloudflare (CDN)      Sentry (Monitoring)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Docker Compose –¥–ª—è production-like –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞

```yaml
# docker-compose.full.yml ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
services:
  postgres:
    image: pgvector/pgvector:pg16 # pgvector –≤–º–µ—Å—Ç–æ –±–∞–∑–æ–≤–æ–≥–æ postgres
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: mydb
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

### CI/CD Pipeline (GitHub Actions)

```yaml
# .github/workflows/ci.yml
name: CI
on: [push, pull_request]
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v4
      - uses: actions/setup-node@v4
        with: { node-version: "22", cache: "pnpm" }
      - run: pnpm install --frozen-lockfile
      - run: pnpm type-check
      - run: pnpm lint
      - run: pnpm build
    env:
      TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }} # Remote caching
      TURBO_TEAM: ${{ secrets.TURBO_TEAM }}
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫: –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å                | –§–∞–π–ª                                     |
| --------------------------- | ---------------------------------------- |
| –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π API endpoint | `packages/trpc/src/router/`              |
| –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ –ë–î          | `packages/database/prisma/schema.prisma` |
| –î–æ–±–∞–≤–∏—Ç—å –æ–±—â–∏–π —Ç–∏–ø/—Å—Ö–µ–º—É    | `packages/shared/src/schemas/`           |
| –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É UI            | `packages/config-tailwind/src/theme.css` |
| –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS/middleware   | `apps/api/src/main.ts`                   |
| –î–æ–±–∞–≤–∏—Ç—å NestJS –º–æ–¥—É–ª—å      | `apps/api/src/`                          |
| –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É           | `apps/web/src/app/`                      |
| –ù–∞—Å—Ç—Ä–æ–∏—Ç—å tRPC –∫–æ–Ω—Ç–µ–∫—Å—Ç     | `packages/trpc/src/context.ts`           |
| –ù–∞—Å—Ç—Ä–æ–∏—Ç—å auth              | `apps/api/src/auth/`                     |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫)

```
–ù–µ–¥–µ–ª—è 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç
  ‚ñ° –î–æ–±–∞–≤–∏—Ç—å Organizations + multi-tenancy –≤ —Å—Ö–µ–º—É
  ‚ñ° –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å –ø–∞—Ä–æ–ª–µ–º (bcrypt)
  ‚ñ° –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Helmet + CORS + Rate limiting
  ‚ñ° –ü–æ–¥–∫–ª—é—á–∏—Ç—å Sentry –¥–ª—è error tracking

–ù–µ–¥–µ–ª—è 2: –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
  ‚ñ° Stripe –±–∏–ª–ª–∏–Ω–≥ (subscriptions + webhooks)
  ‚ñ° Usage-based billing –¥–ª—è AI —Ñ–∏—á
  ‚ñ° –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ (FREE/PRO/ENTERPRISE)

–ù–µ–¥–µ–ª—è 3: AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  ‚ñ° Anthropic/OpenAI SDK —á–µ—Ä–µ–∑ NestJS AIModule
  ‚ñ° Streaming —á–µ—Ä–µ–∑ Vercel AI SDK
  ‚ñ° Token usage tracking
  ‚ñ° pgvector –¥–ª—è embeddings

–ù–µ–¥–µ–ª—è 4: Production-ready
  ‚ñ° Redis (–∫–µ—à + rate limit + jobs)
  ‚ñ° BullMQ –¥–ª—è async AI –∑–∞–¥–∞—á
  ‚ñ° CI/CD —Å Turborepo remote cache
  ‚ñ° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
```

---

_–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã. –ê–∫—Ç—É–∞–ª—å–Ω–∞ –¥–ª—è –≤–µ—Ä—Å–∏–∏ —Å—Ç–∞—Ä—Ç–µ—Ä–∞ —Å –∫–æ–º–º–∏—Ç–æ–º `10e7556`._
