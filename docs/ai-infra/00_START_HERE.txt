=== MVP AGENT SYSTEM v4.0 â€” PRODUCTION ===

ğŸ“¦ FILES:

â”œâ”€â”€ 00_START_HERE.txt            â† you are here
â”œâ”€â”€ package.json                 â† Updated deps: real MCP SDK, ChromaDB, BullMQ, pino
â”œâ”€â”€ types.ts                     â† NEW: shared types, pricing model, config loader
â”œâ”€â”€ sub_agents_config.ts         â† REWRITTEN: split pricing, model routing, thinking budgets
â”œâ”€â”€ orchestrator_v4.ts           â† REWRITTEN: Gemini routing, retry, caching, 24/7 loop
â”œâ”€â”€ mcp_framework_v4.ts          â† REWRITTEN: real @modelcontextprotocol/sdk integration
â”œâ”€â”€ vector_store.ts              â† NEW: ChromaDB persistent context & pattern reuse
â”œâ”€â”€ task_queue.ts                â† NEW: BullMQ 24/7 autonomous processing
â”œâ”€â”€ telegram_bot_handler.ts      â† FIXED: MarkdownV2, max retry, no infinite loop
â””â”€â”€ regression_testing_v4.ts     â† FIXED: real pixelmatch, proper Playwright API

ğŸš€ SETUP:

  1. Install infrastructure:
     docker run -d -p 6379:6379 redis
     docker run -d -p 8000:8000 chromadb/chroma

  2. Install dependencies:
     npm install

  3. Configure .env:
     ANTHROPIC_API_KEY=sk-ant-...
     GOOGLE_API_KEY=...
     TELEGRAM_BOT_TOKEN=...
     TELEGRAM_CHAT_ID=...
     REDIS_URL=redis://localhost:6379
     CHROMA_URL=http://localhost:8000
     DATABASE_URL=postgresql://localhost:5432/mvp
     BUDGET_LIMIT=20

  4. Run:
     npm run build && npm start           # single run
     npm run start:queue                  # 24/7 queue worker

â±ï¸ First feature: 45-120 minutes
ğŸ“Š Cost: $0.02-0.45 per feature (with caching)
ğŸ’° Budget: $20/month = 40-100+ features/month

ğŸ”‘ KEY CHANGES FROM v3:

  âœ… Real MCP servers via @modelcontextprotocol/sdk (not stubs)
  âœ… Accurate input/output pricing (not flat rate)
  âœ… Prompt caching on system prompts (90% input savings)
  âœ… Extended thinking with budget caps (cost-controlled)
  âœ… ChromaDB vector store for context persistence
  âœ… BullMQ task queue for 24/7 operation
  âœ… Retry with exponential backoff + circuit breaker
  âœ… Dynamic model downgrade under budget pressure
  âœ… Gemini routing for orchestrator tasks
  âœ… Real visual regression with pixelmatch
  âœ… MarkdownV2 for Telegram (v1 deprecated)
  âœ… Structured logging with pino
  âœ… Graceful shutdown with state persistence
